# Test_Playnera

Реализовал визуальные механики референса:
- Движение камеры (при захваченном предмете смещением, без предмета перетягиванием, ограничение по краям)
- Размещение предметов на полу, столах, полках
- Доводка предметов к ближайшей точке на полке/столе
- Свободное падение предметов (в случае отсутствия на определенной дистанции "точек притяжения")
- После последней доработки были убраны все коллайдеры, система работает через расчет по по высоте (коллайдер на перетаскиваемом объекте остался, можно доработать).
- Ну и коробочку добавил от себя))

Для поиска ближайших "точек притяжения" не используется Physics2D.OverlapCircle, только sqrMagnitude, с целью оптимизации. Все работает на едином апдейте/лейт апдейте. В ветке Simple более простое решение, без притягивания к точкам. В ветке Advanced - доработанная версия работающая с коллайдерами. В главной ветке и в ветке No Colliders - последняя версия, без коллайдеров на сцене (не считая перетаскиваемого объекта, с него в целом тоже можно убрать, нужно лишь добавить логику опускания к глобальной границе высоты).

Описание:
Запуск игры происходит через единую точку входа: [GameStarter](Assets/Scripts/GameStarter.cs), он создает инициализатор системы, передавая в него все модели и данные, необходимые для игры. Инициализатор создает все классы-контроллеры, а так же подписывает обсерверов на [DragNotificationsManager](Assets/Scripts/Controllers/DragFeature/DragNotificationsManager.cs) и [MainController](Assets/Scripts/Controllers/Core/MainController.cs), первый отвечает за информирование о наличии или отсутствии перетаскиваемого объекта в момент получения событий от инпута, второй занимается раздачей апдейтов и лейтапдейтов всем кому это нужно. Система управления камерой [CameraMoveController](Assets/Scripts/Controllers/Camera/CameraMoveController.cs) содержит в себе ~~стейтмашину(на минималках)~~ свитч обыкновенный, переключая способы движения в зависимости от параметров входящего оповещения. [DragController](Assets/Scripts/Controllers/DragFeature/DragController.cs) - является прослойкой межу инпутом и DragNotificationsManager, его задача определить схватил ли игрок что-либо или нет. За изменение скейла хватаемого объекта отвечает [ScaleController](Assets/Scripts/Controllers/DragFeature/ScaleController.cs). 

Ну и самими объектами управляет [DragableObjectController](Assets/Scripts/Controllers/Object/DragableObjectController.cs), по хорошему его разделить на View и контроллер, но для скорости я оставил его на монобехе. Данный скрипт отвечает за поведение объекта в момент, когда игрок отпускает его, свободное падение и сближение с "точкой притяжения". В момент падения контроллер обходит все поверхности на уровне, сверяет sqrMagnitude до точек на поверхности c квадратом максимального расстояния для начала сближения. В случае обнаружения подходящей "точки притяжения", выбирает самую ближнюю и движется к ней. Если в этот момент игрок снова хватает объект, то все состояния сбрасываются.

Все реализовано на новой инпут системе.


https://github.com/user-attachments/assets/b3c9f9c0-db64-4a86-b96f-403ba731414c

